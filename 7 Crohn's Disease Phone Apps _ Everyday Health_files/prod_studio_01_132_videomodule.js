self.studioLoader.context.evalInContext("var Hl=function(a){return(a=a.exec(jb))?a[1]:\"\"};(function(){if(Qg)return Hl(/Firefox\\/([0-9.]+)/);if(F||Tb||Sb)return cc;if(Ug)return Hl(/Chrome\\/([0-9.]+)/);if(Vg&&!(Ob()||D(\"iPad\")||D(\"iPod\")))return Hl(/Version\\/([0-9.]+)/);if(Rg||Sg){var a=/Version\\/(\\S+).*Mobile\\/(\\S+)/.exec(jb);if(a)return a[1]+\".\"+a[2]}else if(Tg)return(a=Hl(/Android\\s+([0-9.]+)/))?a:Hl(/Version\\/([0-9.]+)/);return\"\"})();var Il={},Jl=/OS (\\S+) like/,Kl=/Android (\\S+);/,Ll=function(a,b){if(null==Il[b]){var c=a.exec(jb);c?(c=c[1].replace(/_/g,\".\"),Il[b]=0<=Ia(c,b)):Il[b]=!1}return Il[b]};var Ml=function(){K.call(this);this.f=this.h=this.c=!1;this.b=0;this.i=[];this.m=!1};y(Ml,K);var Nl=function(a,b){null==b||a.c||(a.a=b,a.w=!Rg&&!Sg,a.v=Rg||Sg,a.w?a.a.addEventListener(\"click\",w(a.j,a),!1):a.v&&(a.a.addEventListener(\"touchstart\",w(a.I,a),!1),a.a.addEventListener(\"touchmove\",w(a.H,a),!1),a.a.addEventListener(\"touchend\",w(a.B,a),!1)),a.c=!0)},Ol=function(a){null!=a.a&&a.c&&(a.c=!1,a.w?a.a.removeEventListener(\"click\",w(a.j,a),!1):a.v&&(a.a.removeEventListener(\"touchstart\",w(a.I,a),!1),a.a.removeEventListener(\"touchmove\",w(a.H,a),!1),a.a.removeEventListener(\"touchend\",w(a.B,a),!1)))};Ml.prototype.I=function(a){this.h=!0;this.b=a.touches.length;this.m=Pl(this,a.touches)||1!=a.touches.length;Ql(this,a.touches)};Ml.prototype.H=function(a){this.f=!0;this.b=a.touches.length};Ml.prototype.B=function(a){this.h&&1==this.b&&!this.f&&!this.m&&Pl(this,a.changedTouches)&&this.dispatchEvent(new J(\"click\"));this.b=a.touches.length;0==this.b&&(this.f=this.h=!1)};Ml.prototype.j=function(){this.dispatchEvent(new J(\"click\"))};var Ql=function(a,b){a.i=[];A(b,function(a){var b=this.i;a=a.identifier;0<=La(b,a)||b.push(a)},a)},Pl=function(a,b){return Na(b,function(a){return 0<=La(this.i,a.identifier)},a)};var Rl=function(a){J.call(this,a)};y(Rl,J);var Sl=function(){K.call(this)};y(Sl,K);g=Sl.prototype;g.qb=p;g.Oa=p;g.qc=p;g.Ta=p;g.Qa=p;g.ub=p;g.la=p;g.Zc=p;g.Nc=p;g.pb=p;g.mc=p;g.tb=p;g.nc=p;g.vc=p;g.Ma=p;g.uc=p;g.rc=p;g.Ra=p;var Tl=function(){K.call(this);this.f=new E;this.i=new Ml;this.j=\"none\"};y(Tl,K);var Ul=function(a){this.width=a.Ma().width;this.height=a.Ma().height;this.c=!1;this.b=a.Qa();this.a=a.ub();this.volume=a.Oa()};Ul.prototype.muted=function(a,b){return!this.b&&a||0<this.volume&&0==b};Tl.prototype.l=function(){Vl(this);Tl.o.l.call(this)};var Vl=function(a){null!=a.b&&a.b.dispose();null!=a.h&&a.h.dispose();null!=a.a&&a.a.Ra();Hb(a.f);Ol(a.i)},Y=function(a,b,c){c&&null!=a.f.get(b)||(a.f.set(b,!0),a.dispatchEvent(new Rl(b)))},Wl=function(a,b){null!=a.f.get(b)&&Ib(a.f,b)};g=Tl.prototype;g.Wd=function(){var a=this.a.Zc(),b=this.a.qb();a&&(Y(this,\"rewind\",!1),-1!=b&&(this.a.la(.75*b)||Wl(this,\"thirdquartile\"),this.a.la(.5*b)||Wl(this,\"midpoint\"),this.a.la(.25*b)||Wl(this,\"firstquartile\"),this.a.nc()&&Y(this,\"replay\",!1)));-1!=b&&(this.a.la(.25*b)&&Y(this,\"firstquartile\",!0),this.a.la(.5*b)&&Y(this,\"midpoint\",!0),this.a.la(.75*b)&&Y(this,\"thirdquartile\",!0))};g.Vd=function(){Y(this,\"creativeview\",!0);null!=this.m?(this.b.s(this.i,\"click\",this.Rd,!1),Nl(this.i,this.m)):this.b.s(this.a,\"click\",this.xe);Y(this,\"start\",!0);(this.a.Qa()||0==this.a.Oa())&&Y(this,\"mute\",!1)};g.Xd=function(){var a=this.a.Qa(),b=this.a.Oa(),c=this.c;c.b&&!a||!a&&0==c.volume&&0<b?Y(this,\"unmute\",!1):this.c.muted(a,b)&&Y(this,\"mute\",!1);this.c.b=a;this.c.volume=b};g.Ud=function(){this.a.tb()?Y(this,\"complete\",!0):\"pausedAtBeginning\"==this.j&&this.a.vc()?Y(this,\"stop\",!0):this.a.Ta()&&!this.a.uc()&&(this.c.c=!0,Y(this,\"pause\",!1))};g.we=function(){this.c.c&&(this.c.c=!1,Y(this,\"resume\",!1))};g.Sd=function(){this.a.mc()?\"pausedAtEnd\"==this.j&&this.a.Ta()?Y(this,\"stop\",!0):Y(this,\"complete\",!0):this.a.qc()};g.Rd=function(){Y(this,\"click\",!1)};g.Td=function(){Y(this,\"error\",!1)};g.xe=function(){Y(this,\"click\",!1)};g.pc=function(){this.c.a=!0;Y(this,\"fullscreen\",!1)};g.oc=function(){this.c.a=!1};g.ve=function(){var a=this.a.Ma(),b=this.a.ub(),c=this.c;if(a.width!=c.width||a.height!=c.height)!this.c.a&&b?this.pc():this.c.a&&!b&&this.oc(),this.c.width=a.width,this.c.height=a.height};var Xl=function(a){this.b=0;this.c=a||100;this.a=[]};g=Xl.prototype;g.add=function(a){var b=this.a[this.b];this.a[this.b]=a;this.b=(this.b+1)%this.c;return b};g.get=function(a){a=Yl(this,a);return this.a[a]};g.set=function(a,b){a=Yl(this,a);this.a[a]=b};g.O=function(){return this.a.length};g.F=function(){for(var a=this.O(),b=this.O(),c=[],a=this.O()-a;a<b;a++)c.push(this.get(a));return c};g.J=function(){for(var a=[],b=this.O(),c=0;c<b;c++)a[c]=c;return a};g.K=function(a){return a<this.O()};g.xa=function(a){for(var b=this.O(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};var Yl=function(a,b){if(b>=a.a.length)throw Error(\"Out of bounds exception\");return a.a.length<a.c?b:(a.b+Number(b))%a.c};var Zl=function(a){K.call(this);this.a=a;this.c=new Xl(4);this.i=-1;this.j=this.h=!1};y(Zl,Sl);g=Zl.prototype;g.qb=function(){return isNaN(this.a.duration)?-1:this.a.duration};g.Oa=function(){return this.a.volume};g.qc=function(){this.a.pause()};g.Ta=function(){return this.a.paused?Rg||Sg||Ug?this.a.currentTime<this.a.duration:!0:!1};g.Qa=function(){return this.a.muted};g.ub=function(){return Rg?this.a.webkitSupportsFullscreen&&this.a.webkitDisplayingFullscreen:this.a.offsetWidth>=document.body.offsetWidth&&this.a.offsetHeight>=document.body.offsetHeight};g.la=function(a){return $l(this)>=a};g.Zc=function(){if(this.a.seeking&&!this.h)this.h=!0,this.i=$l(this);else{if(!this.a.seeking&&this.h){this.h=!1;var a=0!=this.a.currentTime&&this.a.currentTime<this.i;this.i=-1;return a}if(!this.a.seeking&&0!=this.a.currentTime&&$l(this)>this.a.currentTime)return.5<$l(this)-this.a.currentTime}return!1};g.Nc=function(a){this.a.currentTime=a};g.pb=function(){return this.a.currentTime};var $l=function(a){for(a=a.c.F();a.length;){var b=a.pop();if(0<b)return b}return-1};g=Zl.prototype;g.mc=function(){if(!Tg||Tg&&Ll(Kl,2.3))return!0;var a=this.a.duration-$l(this);return 0==this.a.currentTime&&1.5>=a};g.tb=function(){return this.a.ended};g.nc=function(){for(var a=this.c.F(),b=a.length-1;0<=b;b--)if(.5>a[b])return a=this.c,a=0==a.O()?null:a.get(a.O()-1),b=this.c,b.a.length=0,b.b=0,.5<=a&&this.c.add(a),!0;return!1};g.vc=function(){return!isNaN(this.a.duration)&&0<this.a.duration&&0==this.a.currentTime};g.Ma=function(){return new gc(this.a.offsetWidth,this.a.offsetHeight)};g.uc=function(){return this.a.seeking};g.l=function(){Zl.o.l.call(this);this.Ra()};g.rc=function(){this.Ra();this.b=new M(this);this.b.s(this.a,\"canplay\",this.ue);this.b.s(this.a,\"ended\",this.Zd);this.b.s(this.a,\"webkitbeginfullscreen\",this.sc);this.b.s(this.a,\"webkitendfullscreen\",this.ae);this.b.s(this.a,\"pause\",this.be);this.b.s(this.a,\"playing\",this.Ac);this.b.s(this.a,\"timeupdate\",this.ce);this.b.s(this.a,\"volumechange\",this.de);this.b.s(this.a,\"error\",this.$d);this.f=new Ml;this.b.s(this.f,\"click\",this.Yd,!1);Nl(this.f,this.a)};g.Ra=function(){null!=this.f&&(Ol(this.f),this.f=null);null!=this.b&&(this.b.dispose(),this.b=null);this.i=-1;this.h=this.j=!1;var a=this.c;a.a.length=0;a.b=0};var am=function(a){a.j||(a.j=!0,a.dispatchEvent(\"start\"),!Tg&&(!Rg||(Rg||Sg)&&Ll(Jl,4))||a.sc())};g=Zl.prototype;g.ue=function(){Vg&&this.Nc(.001)};g.Ac=function(){this.dispatchEvent(\"play\");Rg||Sg||am(this)};g.ce=function(){this.j||((Rg||Sg)&&0<this.pb()&&am(this),Vb&&this.Ac());this.c.add(this.a.currentTime);this.dispatchEvent(\"timeUpdate\")};g.de=function(){this.dispatchEvent(\"volumeChange\")};g.be=function(){this.dispatchEvent(\"pause\")};g.Zd=function(){this.dispatchEvent(\"end\")};g.sc=function(){this.dispatchEvent(\"beginFullscreen\")};g.ae=function(){this.dispatchEvent(\"endFullscreen\")};g.$d=function(){this.dispatchEvent(\"error\")};g.Yd=function(){this.dispatchEvent(\"click\")};var bm={},cm=function(a){this.i=a;this.f=this.g=!0;this.c=new Tl;this.c.j=\"pausedAtBeginning\";this.u=this.a=this.b=null;Yh(w(this.w,this))},dm=new E;cm.prototype.m=!1;cm.prototype.j=!1;cm.prototype.h=!0;var em=function(a){var b=dm.get(a);null==b&&(b=new cm(a),dm.set(a,b));return b};cm.prototype.w=function(a){this.a=a;fm(this)};var fm=function(a){gm(a,!1);gm(a,!0);if(null!=a.a&&null!=a.u){var b=a.c,c=a.b;Vl(b);b.a=c;b.a.rc();b.c=new Ul(b.a);b.m=null;b.b=new M(b);b.b.s(b.a,\"timeUpdate\",b.Wd,!1);b.b.s(b.a,\"volumeChange\",b.Xd,!1);b.b.s(b.a,\"pause\",b.Ud,!1);b.b.s(b.a,\"play\",b.we,!1);b.b.s(b.a,\"end\",b.Sd,!1);b.b.s(b.a,\"beginFullscreen\",b.pc,!1);b.b.s(b.a,\"endFullscreen\",b.oc,!1);b.b.s(b.a,\"start\",b.Vd,!1);b.b.s(b.a,\"error\",b.Td,!1);b.h=new je(1E3);lf(b.b,b.h,\"tick\",b.ve,!1,b);b.h.start();a.b.s(\"timeUpdate\",a.Xc,!1,a);a.u.paused?a.c.s(\"start\",a.Ua,!1,a):a.Ua()}},gm=function(a,b){hm(a,b,\"resume\",a.Ua);hm(a,b,\"replay\",a.Ce);hm(a,b,\"pause\",a.ze);hm(a,b,\"stop\",a.Oe);hm(a,b,\"mute\",a.te);hm(a,b,\"unmute\",a.Ye);hm(a,b,\"firstquartile\",a.rd);hm(a,b,\"midpoint\",a.re);hm(a,b,\"thirdquartile\",a.We);hm(a,b,\"complete\",a.hd)},hm=function(a,b,c,d){(b?a.c.s:a.c.Z).call(a.c,c,d,!1,a)};g=cm.prototype;g.Ua=function(){this.c.Z(\"start\",this.Ua,!1,this);im(this,\"play\",!this.h);jm(this,\"Start\");this.h=!1;null!=this.a&&this.f&&!this.m&&(this.a.m(),this.m=!0)};g.Ce=function(){im(this,\"replay\",!0);jm(this,\"Stop\");this.g=!1};g.ze=function(){im(this,\"pause\",!0);jm(this,\"Stop\")};g.Oe=function(){im(this,\"stop\",!0);jm(this,\"Stop\");this.g=!1};g.te=function(){im(this,\"mute\",!this.h)};g.Ye=function(){im(this,\"unmute\",!this.h)};g.rd=function(){im(this,\"firstquartile\")};g.re=function(){im(this,\"midpoint\")};g.We=function(){im(this,\"thirdquartile\")};g.hd=function(){im(this,\"complete\");jm(this,\"Stop\");this.g=!1;null!=this.a&&this.f&&!this.j&&(this.a.m(),this.j=!0)};g.Xc=function(a){var b=this.b.qb(),c=this.b.pb();this.a.A.C(\"updateVideoProgress\",[\"EVENT_VIDEO_\"+a.type.toUpperCase(),b,c])};var im=function(a,b,c){null!=a.a&&a.f&&(c&&Cg(a.a.b,\"Count\",a.i,\"EVENT_VIDEO_INTERACTION\"),Cg(a.a.b,\"Count\",a.i,\"EVENT_VIDEO_\"+b.toUpperCase()))},jm=function(a,b){null!=a.a&&a.f&&a.g&&Cg(a.a.b,b,a.i,\"EVENT_VIDEO_VIEW_TIMER\")};var km=function(a){I.call(this);this.c=a;this.a={};this.b=null;Yh(w(this.g,this))};y(km,I);n(\"studio.video.Reporter\",km,void 0);var lm=new E,mm=function(a,b,c){var d=em(a);\"boolean\"==typeof c&&(d.h=c);Vl(d.c);d.g=!0;d.f=!0;d.u=b;d.b=new Zl(d.u);fm(d);lm.K(a)||lm.set(a,new km(b))};km.attach=mm;km.prototype.g=function(a){this.b=a;this.b.Qb(this.c)};km.prototype.l=function(){for(var a in this.a)this.c[a]=this.a[a];km.o.l.call(this)};var nm=function(a){a=em(a);null==a.b||a.b.Ta()||a.b.tb()||(im(a,\"stop\",!1),jm(a,\"Stop\"),a.g=!1);gm(a,!1);a.f=!1;a.u=null;Vl(a.c);a.b&&(a.b.Z(\"timeUpdate\",a.Xc,!1,a),a.b.dispose())};km.detach=nm;var om=function(){};om.prototype.a=p;var pm,qm=function(){};y(qm,om);qm.prototype.a=function(){var a;a:{if(!this.b&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var b=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],c=0;c<b.length;c++){var d=b[c];try{new ActiveXObject(d);a=this.b=d;break a}catch(e){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");}a=this.b}return a?new ActiveXObject(a):new XMLHttpRequest};pm=new qm;var sm=function(a,b){var c=b?fb(b):{};c.responseType=\"blob\";return rm(\"GET\",a,c).then(function(a){return a.response})},rm=function(a,b,c){return new Oc(function(d,e){var f=c||{},k,m=f.bf?f.bf.a():pm.a();try{m.open(a,b,!0)}catch(Xb){e(new tm(\"Error opening XHR: \"+Xb.message,b))}m.onreadystatechange=function(){if(4==m.readyState){h.clearTimeout(k);var a;a:switch(m.status){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:a=!0;break a;default:a=!1}!a&&(a=0===m.status)&&(a=b.match(Re)[1]||null,!a&&h.self&&h.self.location&&(a=h.self.location.protocol,a=a.substr(0,a.length-1)),a=a?a.toLowerCase():\"\",a=!(\"http\"==a||\"https\"==a||\"\"==a));a?d(m):e(new um(m.status,b))}};m.onerror=function(){e(new tm(\"Network error\",b))};var C;if(f.headers){for(var ga in f.headers)C=f.headers[ga],null!=C&&m.setRequestHeader(ga,C);C=f.headers[\"Content-Type\"]}ga=h.FormData&&!1;\"POST\"!=a||void 0!==C||ga||m.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\");f.withCredentials&&(m.withCredentials=f.withCredentials);f.responseType&&(m.responseType=f.responseType);f.se&&m.overrideMimeType(f.se);0<f.Xe&&(k=h.setTimeout(function(){m.onreadystatechange=ba;m.abort();e(new vm(b))},f.Xe));try{m.send(null)}catch(Xb){m.onreadystatechange=ba,h.clearTimeout(k),e(new tm(\"Error sending XHR: \"+Xb.message,b))}})},tm=function(a,b){z.call(this,a+\", url=\"+b);this.url=b};y(tm,z);tm.prototype.name=\"XhrError\";var um=function(a,b){tm.call(this,\"Request Failed, status=\"+a,b);this.status=a};y(um,tm);um.prototype.name=\"XhrHttpError\";var vm=function(a){tm.call(this,\"Request timed out\",a)};y(vm,tm);vm.prototype.name=\"XhrTimeoutError\";n(\"studio.sdk.video.VideoResource.getBlobForUrl\",function(a){return Zh().then(function(b){b=b.ya(a);return\"file:\"==window.location.protocol?Sc(Error(\"You cannot fetch the blob of a video when running locally. Run a local web server to test this creative (For example, python -m SimpleHTTPServer).\")):Ba(b,\"/itag/\")?wm(xm(b)).then(sm):sm(b)})},void 0);var wm=function(a){return rm(\"HEAD\",a).then(function(b){return ym(b)?rm(\"GET\",a).then(function(a){return wm(a.response)}):a})},xm=function(a){return Ba(a,\"/itag/\")&&!Ba(a,\"/alr/yes/\")?(a=a.split(\"/\"),a.splice(a.length-2,0,\"alr\",\"yes\"),a.join(\"/\")):a},ym=function(a){a=a.getResponseHeader(\"Content-Type\");return Ba(a,\"text/plain\")};");
